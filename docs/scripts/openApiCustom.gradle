import java.nio.file.Files
import java.nio.file.StandardCopyOption

tasks.register("openApiCopy") {
    doFirst {
        def outputDir = new File(new File(docDir, config.outputPath), "html5")
        config.openApiCopy.inputFiles.each { filePath ->
            def srcFile = new File(docDir, filePath)
            if (!srcFile.exists()) {
                throw new FileNotFoundException(srcFile.absolutePath)
            }
            def target = new File(outputDir, filePath)
            println("Copy ${srcFile} to ${target}")
            target.mkdirs()
            Files.copy(srcFile.toPath(), target.toPath(), StandardCopyOption.REPLACE_EXISTING)
        }
    }
}

tasks.generateHTML.finalizedBy("openApiCopy")
